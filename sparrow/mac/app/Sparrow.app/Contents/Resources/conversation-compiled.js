var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.evalWorksForGlobals_=null;goog.provide=function(a){if(!COMPILED){if(goog.getObjectByName(a)&&!goog.implicitNamespaces_[a])throw Error('Namespace "'+a+'" already declared.');for(var b=a;b=b.substring(0,b.lastIndexOf("."));)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.implicitNamespaces_={});goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(!COMPILED){for(var d,a=a.replace(/\\/g,"/"),e=goog.dependencies_,f=0;d=b[f];f++){e.nameToPath[d]=a;a in e.pathToNames||(e.pathToNames[a]={});e.pathToNames[a][d]=true}for(d=0;b=c[d];d++){a in e.requires||(e.requires[a]={});e.requires[a][b]=true}}};
goog.require=function(a){if(!COMPILED&&!goog.getObjectByName(a)){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=true;goog.writeScripts_()}else{a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
COMPILED||(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;b>=0;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=d==-1?c.length:d;if(c.substr(d-
7,7)=="base.js"){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=true)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){goog.global.document.write('<script type="text/javascript" src="'+a+'"><\/script>');return true}return false},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)){d.visited[e]=true;
if(e in d.requires)for(var g in d.requires[e])if(g in d.nameToPath)a(d.nameToPath[g]);else if(!goog.getObjectByName(g))throw Error("Undefined nameToPath for "+g);}if(!(e in c)){c[e]=true;b.push(e)}}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:
null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b};goog.propertyIsEnumerableCustom_=function(a,b){if(b in a)for(var c in a)if(c==b&&Object.prototype.hasOwnProperty.call(a,b))return true;return false};goog.propertyIsEnumerable_=function(a,b){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,b):goog.propertyIsEnumerableCustom_(a,b)};goog.isDef=function(a){return a!==void 0};goog.isNull=function(a){return a===null};
goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(a){var b=goog.typeOf(a);return b=="array"||b=="object"&&typeof a.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};
goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(a){a=goog.typeOf(a);return a=="object"||a=="array"||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if(b=="object"||b=="array"){if(a.clone)return a.clone();var b=b=="array"?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){var d=b||goog.global;if(arguments.length>2){var e=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,e);return a.apply(d,b)}}return function(){return a.apply(d,arguments)}};goog.bind=function(a,b,c){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=false;c.appendChild(b.createTextNode(a));
b.body.appendChild(c);b.body.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.typedef=!0;goog.getCssName=function(a,b){var c=a+(b?"-"+b:"");return goog.cssNameMapping_&&c in goog.cssNameMapping_?goog.cssNameMapping_[c]:c};goog.setCssNameMapping=function(a){goog.cssNameMapping_=a};goog.getMsg=function(a,b){var c=b||{},d;for(d in c)var e=(""+c[d]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e);return a};
goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=false,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=true;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var com={sparrow:{}};com.sparrow.additions={};function loadJavascript(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",window.WindowController.jsURLForResource_(a));document.getElementsByTagName("head")[0].appendChild(b)}
function loadCSS(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",window.WindowController.jsURLForResource_(a));document.getElementsByTagName("head")[0].appendChild(b)};com.sparrow.mmscrollbar={};var scrollingWindowResizedCallback=null,scrollingBodyId="main-body",scrollingHorizontalScrollbarId="horizontal-scrollbar",scrollingVerticalScrollbarId="vertical-scrollbar";
function MMScrollWindow(a,b,c){this.lastPositionLeft=this.lastPositionTop=this.lastClientWidth=this.lastClientHeight=this.lastWidth=this.lastHeight=-1;this.horizontalHideTimer=this.verticalHideTimer=this.body=null;this.horizontalKeepVisible=this.verticalKeepVisible=this.offset=this.mouseDown=0;this.scrollCallback=null;this.verticalVisibility=this.horizontalVisibility=!0;this.bodyId=a;this.horizontalScrollbarId=b;this.verticalScrollbarId=c;this.setup()}
MMScrollWindow.prototype.setup=function(){this.body=document.getElementById(this.bodyId);var a=this;this.body.addEventListener("scroll",function(){a.onScroll()},!1);document.body.addEventListener("resize",function(){a.onResize()},!1);this.updateScrollbarIfNeeded();if(null!=this.verticalScrollbarId){var b=document.getElementById(this.verticalScrollbarId);null!=b&&(b.addEventListener("mouseover",function(){a.scrollbarVerticalKeepVisible(!0)},!1),b.addEventListener("mouseout",function(){a.scrollbarVerticalKeepVisible(!1)},
!1))}null!=this.horizontalScrollbarId&&(b=document.getElementById(this.horizontalScrollbarId),null!=b&&(b.addEventListener("mouseover",function(){a.scrollbarHorizontalKeepVisible(!0)},!1),b.addEventListener("mouseout",function(){a.scrollbarHorizontalKeepVisible(!1)},!1)));null!=this.verticalScrollbarId&&(b=document.getElementById(this.verticalScrollbarId+"-thumb"),null!=b&&b.addEventListener("mousedown",function(b){a.scrollbarVerticalMouseDown(b)},!0));null!=this.horizontalScrollbarId&&(b=document.getElementById(this.horizontalScrollbarId+
"-thumb"),null!=b&&b.addEventListener("mousedown",function(b){a.scrollbarHorizontalMouseDown(b)},!0));document.addEventListener("mousemove",function(b){a.scrollbarMouseMove(b)},!1);document.addEventListener("mouseup",function(b){a.scrollbarMouseUp(b)},!1);a=this;setTimeout(function(){a.showScrollerAfterDelay()},500)};MMScrollWindow.prototype.setHorizontalScrollbarVisible=function(a){this.horizontalVisibility=a};
MMScrollWindow.prototype.setVerticalScrollbarVisible=function(a){this.verticalVisibility=a};MMScrollWindow.prototype.onScroll=function(){this.updateScrollbarIfNeeded()};MMScrollWindow.prototype.onResize=function(){this.updateScrollbarIfNeeded()};MMScrollWindow.prototype.showScroller=function(){this.updateScrollbarIfNeeded()};MMScrollWindow.prototype.showScrollerAfterDelay=function(){this.updateScrollbarIfNeeded();this.scrollbarHorizontalShow();this.scrollbarVerticalShow()};
MMScrollWindow.prototype.updateScrollbarIfNeeded=function(){this.updateScrollbarSizeIfNeeded();this.updateScrollbarPositionIfNeeded()};MMScrollWindow.prototype.updateScrollbarPositionIfNeeded=function(){this.updateScrollbarTopIfNeeded();this.updateScrollbarLeftIfNeeded()};MMScrollWindow.prototype.updateScrollbarTopIfNeeded=function(){this.body.scrollTop!=this.lastPositionTop&&(this.lastPositionTop=this.body.scrollTop,this.updateScrollbarTop())};MMScrollWindow.prototype.updateScrollbarTop=function(){this.updateVerticalScrollbar()};
MMScrollWindow.prototype.updateScrollbarLeftIfNeeded=function(){this.body.scrollLeft!=this.lastPositionLeft&&(this.lastPositionLeft=this.body.scrollLeft,this.updateScrollbarLeft())};MMScrollWindow.prototype.updateScrollbarLeft=function(){this.updateHorizontalScrollbar()};MMScrollWindow.prototype.updateScrollbarSizeIfNeeded=function(){this.updateScrollbarWidthIfNeeded();this.updateScrollbarHeightIfNeeded()};
MMScrollWindow.prototype.updateScrollbarWidthIfNeeded=function(){this.body.scrollHeight==this.lastHeight&&window.innerWidth==this.lastClientWidth||(this.lastClientWidth=window.innerWidth,this.lastWidth=this.body.scrollWidth,this.updateScrollbarWidth())};MMScrollWindow.prototype.updateScrollbarWidth=function(){this.updateHorizontalScrollbar()};
MMScrollWindow.prototype.updateScrollbarHeightIfNeeded=function(){this.body.scrollHeight==this.lastHeight&&window.innerHeight==this.lastClientHeight||(this.lastClientHeight=window.innerHeight,this.lastHeight=this.body.scrollHeight,this.updateScrollbarHeight())};MMScrollWindow.prototype.updateScrollbarHeight=function(){this.updateVerticalScrollbar()};
MMScrollWindow.prototype.updateHorizontalScrollbar=function(){if(null!=this.horizontalScrollbarId){var a=document.getElementById(this.horizontalScrollbarId+"-thumb");if(null!=a){var b=window.innerWidth,c=this.body.scrollWidth,d=(b-20)*(b/c);6>d&&(d=6);c<=b&&(d=0);b=b>=c?0:(b-20)*this.body.scrollLeft/c;a.style.left=b+10+"px";a.style.width=d+"px";this.scrollbarHorizontalShow()}}};
MMScrollWindow.prototype.updateVerticalScrollbar=function(){if(null!=this.verticalScrollbarId){var a=document.getElementById(this.verticalScrollbarId+"-thumb");if(null!=a){var b=window.innerHeight,c=this.body.scrollHeight,d=(b-25)*(b/c);6>d&&(d=6);c<=b&&(d=0);b=b>=c?0:(b-25)*this.body.scrollTop/c;a.style.top=b+10+"px";a.style.height=d+"px";this.scrollbarVerticalShow()}}};MMScrollWindow.prototype.scrollbarVerticalMouseDown=function(a){this.scrollbarMouseDown(a,1,a.offsetY);this.scrollbarVerticalKeepVisible(!0)};
MMScrollWindow.prototype.scrollbarHorizontalMouseDown=function(a){this.scrollbarMouseDown(a,2,a.offsetX);this.scrollbarHorizontalKeepVisible(!0)};MMScrollWindow.prototype.scrollbarMouseDown=function(a,b,c){this.mouseDown=b;this.offset=c;a.stopPropagation();a.preventDefault()};MMScrollWindow.prototype.scrollbarMouseMove=function(a){0!=this.mouseDown&&(1==this.mouseDown?this.scrollbarVerticalMouseMove(a):2==this.mouseDown&&this.scrollbarHorizontalMouseMove(a),a.stopPropagation(),a.preventDefault())};
MMScrollWindow.prototype.scrollbarVerticalMouseMove=function(a){var b=window.innerHeight,c=this.body.scrollHeight,a=(a.clientY-this.offset-10)*c/(b-20);0>a&&(a=0);a>c-b&&(a=c-b);this.body.scrollTop=a};MMScrollWindow.prototype.scrollbarHorizontalMouseMove=function(a){var b=window.innerWidth,c=this.body.scrollWidth,a=(a.clientX-this.offset-10)*c/(b-20);0>a&&(a=0);a>c-b&&(a=c-b);this.body.scrollLeft=a};
MMScrollWindow.prototype.scrollbarMouseUp=function(a){0!=this.mouseDown&&(this.mouseDown=0,a.stopPropagation(),a.preventDefault(),this.scrollbarVerticalKeepVisible(!1),this.scrollbarHorizontalKeepVisible(!1))};
MMScrollWindow.prototype.scrollbarVerticalKeepVisible=function(a){if(this.verticalVisibility&&null!=this.verticalScrollbarId){var b=document.getElementById(this.verticalScrollbarId+"-thumb");null!=b&&(a?this.verticalKeepVisible++:this.verticalKeepVisible--,a?(b.className="-sparrow-scrollbar-thumb-not-animated",this.scrollbarVerticalShow()):(b.className="-sparrow-scrollbar-thumb",this.scrollbarVerticalHideAfterDelay()))}};
MMScrollWindow.prototype.scrollbarHorizontalKeepVisible=function(a){if(this.horizontalVisibility&&null!=this.horizontalScrollbarId){var b=document.getElementById(this.horizontalScrollbarId+"-thumb");null!=b&&(a?this.horizontalKeepVisible++:this.horizontalKeepVisible--,a?(b.className="-sparrow-scrollbar-thumb-not-animated",this.scrollbarHorizontalShow()):(b.className="-sparrow-scrollbar-thumb",this.scrollbarHorizontalHideAfterDelay()))}};
MMScrollWindow.prototype.scrollbarVerticalShow=function(){if(this.verticalVisibility&&(this.scrollbarVerticalCancelHideAfterDelay(),null!=this.verticalScrollbarId)){var a=document.getElementById(this.verticalScrollbarId+"-thumb");null!=a&&(a.style.opacity=0.5,this.scrollbarVerticalHideAfterDelay())}};
MMScrollWindow.prototype.scrollbarHorizontalShow=function(){if(this.horizontalVisibility&&(this.scrollbarHorizontalCancelHideAfterDelay(),null!=this.horizontalScrollbarId)){var a=document.getElementById(this.horizontalScrollbarId+"-thumb");null!=a&&(a.style.opacity=0.5,this.scrollbarHorizontalHideAfterDelay())}};
MMScrollWindow.prototype.scrollbarVerticalHideAfterDelay=function(){this.scrollbarVerticalCancelHideAfterDelay();if(!(0<this.verticalKeepVisible)){var a=this;this.verticalHideTimer=setTimeout(function(){a.scrollbarVerticalHide()},500)}};MMScrollWindow.prototype.scrollbarHorizontalHideAfterDelay=function(){this.scrollbarHorizontalCancelHideAfterDelay();if(!(0<this.horizontalKeepVisible)){var a=this;this.horizontalHideTimer=setTimeout(function(){a.scrollbarHorizontalHide()},500)}};
MMScrollWindow.prototype.scrollbarVerticalHide=function(){this.scrollbarVerticalCancelHideAfterDelay();if(null!=this.verticalScrollbarId){var a=document.getElementById(this.verticalScrollbarId+"-thumb");null!=a&&(a.style.opacity=0)}};MMScrollWindow.prototype.scrollbarHorizontalHide=function(){this.scrollbarHorizontalCancelHideAfterDelay();if(null!=this.horizontalScrollbarId){var a=document.getElementById(this.horizontalScrollbarId+"-thumb");null!=a&&(a.style.opacity=0)}};
MMScrollWindow.prototype.scrollbarVerticalCancelHideAfterDelay=function(){clearTimeout(this.verticalHideTimer)};MMScrollWindow.prototype.scrollbarHorizontalCancelHideAfterDelay=function(){clearTimeout(this.horizontalHideTimer)};var mainScrollWindow=null;
function setupScrollbar(a,b){mainScrollWindow=new MMScrollWindow(scrollingBodyId,scrollingHorizontalScrollbarId,scrollingVerticalScrollbarId);scrollingBody=mainScrollWindow.body;scrollingBodyDeltaX=a;scrollingBodyDeltaY=b;window.addEventListener("resize",function(){scrollingResize()},!0);scrollingUpdateSize()}function scrollingShowScroller(){null!=mainScrollWindow&&mainScrollWindow.updateScrollbarIfNeeded()}
function scrollingResize(){null!=scrollingWindowResizedCallback&&scrollingWindowResizedCallback();scrollingUpdateSize()}function scrollingUpdateSize(){scrollingBody.style.height=window.innerHeight-scrollingBodyDeltaY;scrollingBody.style.width=0==scrollingBodyDeltaX?"100%":window.innerWidth-scrollingBodyDeltaX}
function scrollingReset(){mainScrollWindow.body=document.getElementById(mainScrollWindow.bodyId);scrollingBody=mainScrollWindow.body;mainScrollWindow.body.addEventListener("scroll",function(){mainScrollWindow.onScroll()},!1)};com.sparrow.htmlformatting={};function is_all_ws(a){return!/[^\t\n\r ]/.test(a.data)}function is_ignorable(a){return 8==a.nodeType||3==a.nodeType&&is_all_ws(a)}function first_child(a){for(a=a.firstChild;a;){if(!is_ignorable(a))return a;a=a.nextSibling}return null}function number_of_children(a){var b;for(i=b=0;i<a.childNodes.length;i++){var c;c=a.childNodes.item(i);is_ignorable(c)||b++}return b}function getAbsoluteURL(a,b){var c=new URI(b),d=new URI(a);return null==c?a:c.resolve(d).toString()}
function getDocumentHTML(){return document.documentElement.outerHTML}function getNodeHTML(a){var b=document.createElement("div");b.innerHTML=a;return b}function getSpanNodeHTML(a){var b=document.createElement("span");b.innerHTML=a;return b}function fixHTMLFormatting(a,b,c,d){return fixedNodeHTMLFormatting(a,b,c,d,!1).innerHTML}
function fixedNodeHTMLFormatting(a,b,c,d,e){a=getNodeHTML(a);replaceURLUsingBaseURL(a,b);removeJavascript(a);removeIFrame(a);e&&(filterMicrosoftFormatting(a),removeStyle(a));removeUnusefulBlanks(a);mergeBlockquotes(a);removeEltHundredPercent(a);e&&(removeAbsolutePosition(a),filterContentEditable(a),filterId(a));d&&collapseQuoted(a,null);return a}
function replaceURLUsingBaseURL(a,b){if(null!=b)for(var c=a.firstChild;null!=c;){var d;d=c.nextSibling;if(c.nodeType==Node.ELEMENT_NODE){var e;e=c.tagName.toLowerCase();"img"==e?(e=c.getAttribute("src"),null!=e&&(e=getAbsoluteURL(b,e),c.setAttribute("src",e))):"a"==e&&(e=c.getAttribute("href"),null!=e&&(e=getAbsoluteURL(b,e),c.setAttribute("href",e)))}replaceURLUsingBaseURL(c,b);c=d}}var jsAttrToRemove="onabort onblur onchange onclick ondblclick ondragdrop onerror onfocus onkeydown onkeypress onload onmouseover onmouseout onreset onresize onsubmit onunload onafterprint onbeforeprint onbeforeonload onhaschange onmessage onoffline ononline onpagehide onpageshow onpopstate onredo onstorage onundo oncontextmenu onformchange onforminput oninput oninvalid onselect onkeyup ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop onmousedown onmousemove onmouseup onmousewheel onscroll onabort oncanplay oncanplaythrough ondurationchange onemptied onended onloadeddata onloadedmetadata onloadstart onpause onplay onplaying onprogress onratechange onreadystatechange onseeked onseeking onstalled onsuspend ontimeupdate onvolumechange onwaiting".split(" ");
function removeJavascript(a){for(var b=a.firstChild;null!=b;){var c;c=b.nextSibling;if(b.nodeType==Node.ELEMENT_NODE)if("script"==b.tagName.toLowerCase())a.removeChild(b);else if(b.nodeType==Node.ELEMENT_NODE){for(var d in jsAttrToRemove)b.removeAttribute(jsAttrToRemove[d]);removeJavascript(b)}b=c}}function removeIFrame(a){for(var b=a.firstChild;null!=b;){var c;c=b.nextSibling;b.nodeType==Node.ELEMENT_NODE&&("iframe"==b.tagName.toLowerCase()?a.removeChild(b):removeIFrame(b));b=c}}
function filterMicrosoftFormatting(a){for(a=a.firstChild;null!=a;){var b;b=a.nextSibling;a.nodeType==Node.ELEMENT_NODE&&("MsgListParagraph"==a.className?(a.className=null,a.style.removeProperty("text-indent"),a.style.setProperty("margin","0px")):"MsgListParagraph"==a.className?(a.className=null,a.style.removeProperty("text-indent")):"WordSection1"==a.className?(a.className=null,a.style.removeProperty("text-indent")):"MsoHyperlink"==a.className?a.className=null:"MsoHyperlinkFollowed"==a.className?
a.className=null:"MsoNormal"==a.className?(a.className=null,a.style.removeProperty("text-indent"),a.style.setProperty("margin","0px")):"MsoPlainText"==a.className?a.className=null:"MsoListParagraphCxSpFirst"==a.className?(a.className=null,a.style.removeProperty("text-indent"),a.style.setProperty("margin","0px")):"MsoListParagraphCxSpMiddle"==a.className?(a.className=null,a.style.removeProperty("text-indent"),a.style.setProperty("margin","0px")):"MsoListParagraphCxSpLast"==a.className&&(a.className=
null,a.style.removeProperty("text-indent"),a.style.setProperty("margin","0px")),filterMicrosoftFormatting(a));a=b}}function removeStyle(a){for(var b=a.firstChild;null!=b;){var c;c=b.nextSibling;b.nodeType==Node.ELEMENT_NODE&&("style"==b.tagName.toLowerCase()?a.removeChild(b):removeStyle(b));b=c}}function removeBackgroundImage(){}
function removeUnusefulBlanks(a){for(var b=a.firstChild;null!=b;){var c,d;c=b.nextSibling;d=!1;removeUnusefulBlanks(b);if(!d&&b.nodeType==Node.ELEMENT_NODE){var e;e=b.tagName.toLowerCase();"div"==e&&0==number_of_children(b)&&(a.removeChild(b),d=!0)}!d&&(null!=c&&c.nodeType==Node.ELEMENT_NODE)&&(e=c.tagName.toLowerCase(),is_all_ws(b)&&"blockquote"==e&&(a.removeChild(b),d=!0));!d&&(null!=c&&b.nodeType==Node.ELEMENT_NODE)&&(e=b.tagName.toLowerCase(),is_all_ws(c)&&"blockquote"==e&&(b=c,c=c.nextSibling,
a.removeChild(b)));b=c}}function isBlockquote(a){return null==a.tagName||"blockquote"!=a.tagName.toLowerCase()?!1:"gmail_quote"==a.className||"cite"==a.getAttribute("type")?!0:!1}
function mergeBlockquotes(a){for(var b=null,c=!1,d=a.firstChild;null!=d;){var e;e=d.nextSibling;if(d.nodeType==Node.ELEMENT_NODE){var f;f=d.tagName.toLowerCase();if(isBlockquote(d))if(null==b)if(1==d.childNodes.length&&(isBlockquote(d)||"div"==f))b=d;else{b=document.createElement("blockquote");b.setAttribute("type","cite");f=document.createElement("div");b.appendChild(f);for(c=d.firstChild;null!=c;)f.appendChild(c.cloneNode(!0)),c=c.nextSibling;a.replaceChild(b,d);c=!0}else{c=d.firstChild;if(1==d.childNodes.length&&
(isBlockquote(d)||"div"==f))b.appendChild(c.cloneNode(!0));else{f=document.createElement("div");b.appendChild(f);for(c=d.firstChild;null!=c;)f.appendChild(c.cloneNode(!0)),c=c.nextSibling}a.removeChild(d);c=!0}else null!=b&&(mergeBlockquotes(b)&&(c=!0),b=null),mergeBlockquotes(d)&&(c=!0)}d=e}null!=b&&mergeBlockquotes(b)&&(c=!0);return c}function removeEltHundredPercent(){}function removeAbsolutePosition(){}function hideOrRenderCID(){}
function filterContentEditable(a){for(a=a.firstChild;null!=a;){var b;b=a.nextSibling;a.nodeType==Node.ELEMENT_NODE&&(a.contentEditable&&a.removeAttribute("contentEditable"),filterContentEditable(a));a=b}}function filterId(a){for(a=a.firstChild;null!=a;){var b;b=a.nextSibling;a.nodeType==Node.ELEMENT_NODE&&("main-body"==a.id&&(a.id=null),null!=a.className&&(a.className=null),filterId(a));a=b}}var showQuotedTextImage=null;
function collapseQuoted(a,b){null==showQuotedTextImage&&(showQuotedTextImage=webViewCallController("jsImageResourceURL:",["MessageShowQuotedText.png"]));for(var c=1,d=a.firstChild;null!=d;){var e,f,g;f=null==b?c.toString():b+"."+c.toString();e=d.nextSibling;g=!1;d.nodeType==Node.ELEMENT_NODE&&isBlockquote(d)&&(g=!0);g?(g=document.createElement("div"),g.setAttribute("onclick","toggleBlockQuoteVisibility(event, '"+f+"')"),g.id=f+"-label",g.className="-sparrow-quotedTextLabelHide",g.style.backgroundImage=
"url("+showQuotedTextImage+")",a.insertBefore(g,d),g=document.createElement("div"),g.setAttribute("onclick","toggleBlockQuoteVisibility(event, '"+f+"')"),g.id=f+"-label-hide",g.className="-sparrow-quotedTextLabelHide",g.style.display="none",g.style.backgroundImage="url("+showQuotedTextImage+")",a.insertBefore(g,d),d.style.display="none",d.id=f):d.nodeType==Node.ELEMENT_NODE&&"a"!=d.tagName.toLowerCase()&&collapseQuoted(d,f);d=e;c++}}
function createException(){try{return this.undef(),null}catch(a){return a}}
function stringifyArguments(a){for(var b=Array.prototype.slice,c=0;c<a.length;++c){var d=a[c];void 0===d?a[c]="undefined":null===d?a[c]="null":d.constructor&&(d.constructor===Array?a[c]=3>d.length?"["+this.stringifyArguments(d)+"]":"["+this.stringifyArguments(b.call(d,0,1))+"..."+this.stringifyArguments(b.call(d,-1))+"]":d.constructor===Object?a[c]="#object":d.constructor===Function?a[c]="#function":d.constructor===String&&(a[c]='"'+d+'"'))}return a.join(",")}
function getCallstack(a){for(var b=/function\s*([\w\-$]+)?\s*\(/i,c=[],d,e;a&&10>c.length;)d=b.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",e=Array.prototype.slice.call(a.arguments||[]),c[c.length]=d+"("+this.stringifyArguments(e)+")",a=a.caller;return c}function printCurrentStack(){var a;a=getCallstack(arguments.callee);var b=null,c;for(c in a)b=null==b?"  "+a[c]:b+"\n  "+a[c];null==b&&(b="no stack");console.log(b)}
function readabilityCleaning(a){readabilityHasTable(a)||(a.innerHTML=a.innerHTML.replace(RegExp("<br/?>[ \r\ns]*<br/?>","g"),"</p><p>"),readabilityApplyFontStyle(a),readabilityRequoteOutlook(a),readabilityCleanStyles(a),readabilityKillBreaks(a))}function readabilityHasTable(a){for(a=a.firstChild;null!=a;){var b;b=a.nextSibling;if(a.nodeType==Node.ELEMENT_NODE&&"table"==a.tagName.toLowerCase()||readabilityHasTable(a))return!0;a=b}return!1}
function readabilityGetInnerText(a){return"Microsoft Internet Explorer"==navigator.appName?a.innerText:a.textContent}function getCharCount(a,b){return readabilityGetInnerText(a).split(b||",").length}function readabilityApplyFontStyle(a){for(var b=a.firstChild;null!=b;){var c;c=b.nextSibling;1==b.nodeType&&(readabilityApplyFontStyle(b),"font"==b.tagName.toLowerCase()&&readabilityReplaceFontStyle(a,b));b=c}}
function readabilityReplaceFontStyle(a,b){var c=b.firstChild;fontColor=b.getAttribute("color");var d;d=document.createElement("span");null!=fontColor&&(d.style.color=fontColor);for(;null!=c;)nextNode=c.nextSibling,d.appendChild(c),c=nextNode;a.replaceChild(d,b)}
function readabilityRequoteOutlook(a){for(var b=a.firstChild;null!=b;){if(1==b.nodeType){if("div"==b.tagName.toLowerCase()&&"OutlookMessageHeader"==b.className){readabilityOutlookMoveQuoted(a,b);break}readabilityRequoteOutlook(b)}b=b.nextSibling}}function readabilityOutlookMoveQuoted(a,b){var c=b,d;d=document.createElement("blockquote");for(d.setAttribute("type","cite");null!=c;)nextNode=c.nextSibling,d.appendChild(c),c=nextNode;a.appendChild(d)}
function readabilityCleanStyles(a){var a=a||document,b=a.firstChild;if(a){var c,d,e;for("function"==typeof a.removeAttribute&&a.removeAttribute("style");null!=b;)1==b.nodeType&&(a=b.style.fontWeight,c=b.style.textDecoration,d=b.style.fontStyle,e=b.style.color,"solid"==b.style.borderLeftStyle&&"blockquote"==b.tagName.toLowerCase()&&b.setAttribute("type","cite"),b.removeAttribute("style"),b.style.fontWeight=a,b.style.textDecoration=c,b.style.fontStyle=d,b.style.color=e,readabilityCleanStyles(b)),b=
b.nextSibling}}function readabilityKillDivs(a){for(var b=a.getElementsByTagName("div"),c=b.length-1;0<=c;c--){var d=b[c].getElementsByTagName("p").length,e=b[c].getElementsByTagName("img").length,f=b[c].getElementsByTagName("li").length,g=b[c].getElementsByTagName("a").length,j=b[c].getElementsByTagName("embed").length;10>getCharCount(b[c])&&(e>d||f>d||g>d||0==d||0<j)&&b[c].parentNode.removeChild(b[c])}return a}
function readabilityKillBreaks(a){a.innerHTML=a.innerHTML.replace(/(<br\s*\/?>(\s|&nbsp;?)*){1,}/g,"<br />");return a}function readabilityClean(a,b,c){for(var b=a.getElementsByTagName(b),c=c||1E6,d=0;d<b.length;d++)getCharCount(b[d]," ")<c&&b[d].parentNode.removeChild(b[d]);return a};com.sparrow.conversation={};var goDownBlocked=!1,defaultContentsHeight="0px";function jsLog(a){window.WindowController.jsLog_(a)}function clickedOnHeader(a,b){isMessageExpanded(b)?a.altKey?collapseAllMessages():setMessageExpanded(b,!1):a.altKey?expandAllMessages():(setMessageExpanded(b,!0),isSortOrderFromOlderToNewer()?isMessageIsFirst(b)&&scrollToFirstMessageAfterDelay():isMessageIsLast(b)&&scrollToLastMessageAfterDelay());updateAllMessageContentsSizeNow();a.stopPropagation()}
function isMessageExpanded(a){a=document.getElementById("Message:"+a+"-contents-animated");return null==a?!1:a.style.height==defaultContentsHeight||""==a.style.height?!1:!0}var updateSizeEnabled=!0,timerResize=null;function setUpdateSizeEnabled(a){updateSizeEnabled=a}function updateAllMessageContentsSize(){updateAllMessageContentsSizeWithLast(!1,300)}
function updateAllMessageContentsSizeWithLast(a,b){null!=timerResize&&(clearTimeout(timerResize),timerResize=null);timerResize=setTimeout(function(){updateAllMessageContentsSizeStepWithLast(a)},b)}function updateAllMessageContentsSizeNow(){null!=timerResize&&(clearTimeout(timerResize),timerResize=null);updateAllMessageContentsSizeStep()}timerResize=null;function updateAllMessageContentsSizeStep(){updateAllMessageContentsSizeStepWithLast(!1)}
function updateAllMessageContentsSizeStepWithLast(a){var b=window.WindowController.jsMessageIDs(),c;for(c in b){var d=b[c];cacheStoreMessageExpandedSize(d)}var e;e=!1;for(c in b)d=b[c],updateMessageContentsSizeStep(d)&&(e=!0);cacheClearMessageExpandedSize();e||windowResizedScroll();e?updateAllMessageContentsSize():a?window.WindowController.jsConversationSizeConverged():updateAllMessageContentsSizeWithLast(!0,300)}
function updateMessageContentsSizeStep(a){if(updateSizeEnabled&&isMessageExpanded(a)){var b=!1,c=document.getElementById("Message:"+a+"-contents"),d=document.getElementById("Message:"+a+"-contents-animated");if(null!=c){var e=window.WindowController.jsAttachmentIDsForMessageID_(a),f;for(f in e){var g=e[f];updateAttachmentSize(a,g)&&(b=!0)}var j=window.WindowController.jsAttachedMessageIDsForMessageID_(a),h;for(h in j){var k=j[h],e=window.WindowController.jsAttachmentIDsForMessageID_(k);for(f in e)g=
e[f],updateAttachmentSize(k,g)&&(b=!0)}null!=c&&(a=null!=cacheMessageExpandedSize?cacheMessageExpandedSize[a]:c.clientHeight,0==a&&(a=1),d.style.height!=a+"px"&&(d.style.height=a+"px",b=!0,c.resizeLastChance=!1));return b}}}function updateMessageContentsSize(a){var b=document.getElementById("Message:"+a+"-contents");null!=b&&(b.resizeLastChance=!1,updateMessageContentsSizeProcess(a))}
function updateMessageContentsSizeProcess(a){jsLog("update msgcontentssize1 "+a);if(updateSizeEnabled)if(jsLog("update msgcontentssize2 "+a),isMessageExpanded(a)){var b=!1,c=document.getElementById("Message:"+a+"-contents"),d=document.getElementById("Message:"+a+"-contents-animated"),e=window.WindowController.jsAttachmentIDsForMessageID_(a),f;for(f in e){var g=e[f];updateAttachmentSize(a,g)&&(b=!0)}var j=window.WindowController.jsAttachedMessageIDsForMessageID_(a),h;for(h in j){var k=j[h],e=window.WindowController.jsAttachmentIDsForMessageID_(k);
for(f in e)g=e[f],updateAttachmentSize(k,g)&&(b=!0)}if(null!=c&&(null!=cacheMessageExpandedSize?(jsLog("use cache for "+a),e=cacheMessageExpandedSize[a]):(jsLog("update client height "+a),e=c.clientHeight),0==e&&(e=1),d.style.height!=e+"px"))d.style.height=e+"px",b=!0,c.resizeLastChance=!1;b?setTimeout('updateMessageContentsSizeProcess("'+a+'")',300):(c.resizeLastChance?c.resizeLastChance=!1:(c.resizeLastChance=!0,setTimeout('updateMessageContentsSizeProcess("'+a+'")',1E3)),windowResizedScroll())}else jsLog("not expanded "+
a);else jsLog("notupdatesize "+a)}var cacheMessageExpandedSize=null;function cacheStoreMessageExpandedSize(a){null==cacheMessageExpandedSize&&(cacheMessageExpandedSize={});var b=document.getElementById("Message:"+a+"-contents");null!=b&&(cacheMessageExpandedSize[a]=b.clientHeight)}function cacheClearMessageExpandedSize(){cacheMessageExpandedSize=null}var expandedTimer={};
function setMessageExpanded(a,b){var c=document.getElementById("Message:"+a),d=document.getElementById("Message:"+a+"-header"),e=document.getElementById("Message:"+a+"-body-container");document.getElementById("Message:"+a+"-contents");var f=document.getElementById("Message:"+a+"-contents-animated");if(b){if(null!=expandedTimer[a]&&(clearTimeout(expandedTimer[a]),expandedTimer[a]=null),d.className="-sparrow-messageHeaderExpanded",c.className="-sparrow-messageExpanded",e.style.display="block",f.style.display=
"block",f.style.height="1px",null!=window.WindowController)window.WindowController.jsLoadMessageIfNeeded_(a),window.WindowController.jsIsMessageHeadersAlwaysVisible()&&setDetailsVisible(a,!0)}else setDetailsVisible(a,!1),f.style.height=defaultContentsHeight,null!=expandedTimer[a]&&(clearTimeout(expandedTimer[a]),expandedTimer[a]=null),expandedTimer[a]=setTimeout(function(){setMessageExpandedEnd(a)},400);applyReplyBarVisibility(a);applyHeaderSize(a);deselectAllAttachment()}
function setMessageExpandedEnd(a){expandedTimer[a]=null;var b=document.getElementById("Message:"+a),c=document.getElementById("Message:"+a+"-header"),a=document.getElementById("Message:"+a+"-contents-animated");b.className="-sparrow-message";c.className="-sparrow-messageHeader";a.style.display="none";windowResizedScroll()}function setMessageExpandedEnd2(){}
function setMessageStateOpened(a){document.getElementById("Message:"+a);var b=document.getElementById("Message:"+a+"-body-container"),a=document.getElementById("Message:"+a+"-detailed-header");b.style.display="block";null!=a&&(a.style.display="block",a.style.height="auto")}
function setMessageAttachment(a,b){var c=document.getElementById("Message:"+a+"-attachment"),d=document.getElementById("Message:"+a+"-replybar-saveattachmentbutton"),e=document.getElementById("Message:"+a+"-replybar-saveoneattachmentlabel"),f=document.getElementById("Message:"+a+"-replybar-saveallattachmentslabel");0==b?(c.style.visibility="hidden",null!=d&&(d.style.visibility="hidden")):1==b?(c.style.visibility="visible",null!=d&&(d.style.visibility="visible",e.style.display="inline",f.style.display=
"none")):(c.style.visibility="visible",null!=d&&(d.style.visibility="visible",e.style.display="none",f.style.display="inline"))}function showBackArrow(){document.getElementById("backArrow").style.visibility="visible"}function hideBackArrow(){document.getElementById("backArrow").style.visibility="hidden"}function updateMessage(a,b){setupHorizontalScrollerForMsg(a);document.getElementById("Message:"+a+"-detailed-header");document.getElementById("Message:"+a+"-body").innerHTML=b}
function updateMessageAttachments(a,b){document.getElementById("Message:"+a+"-attachments").innerHTML=b}function updatePreview(a,b){var c=document.getElementById("Message:"+a+"-preview");null!=c&&(c.innerHTML=b)}var updateMessageTimer={};function updateMessageAfterDelay(a){null!=updateMessageTimer[a]&&clearTimeout(updateMessageTimer[a]);updateMessageTimer[a]=setTimeout(function(){updateAttachmentStep2(a,null)},100)}
function updateAttachment(a,b,c){setDownloadingStateDisabled(a,!0);var d=document.getElementById("MMAttachment:"+a+":"+b);null!=d&&(d.innerHTML=c,null!=updateMessageTimer[a]&&clearTimeout(updateMessageTimer[a]),updateMessageTimer[a]=setTimeout(function(){updateAttachmentStep2(a,b)},100))}function updateAttachmentStep2(a){updateMessageTimer[a]=null;setDownloadingStateDisabled(a,!1);window.WindowController.jsUpdateDownloadingState();updateAllMessageContentsSize()}
function updateMessageAsAttachment(a,b,c){setDownloadingStateDisabled(a,!0);var d=document.getElementById("MMAttachmentContainer:"+a+":"+b);console.log("found el (msg as attachment) "+d);if(null==d&&(d=document.getElementById("MMAttachment:"+a+":"+b),null==d))return;d.outerHTML='<div class="messageBodyTextContents">'+c+"</div>";null!=updateMessageTimer[a]&&clearTimeout(updateMessageTimer[a]);updateMessageTimer[a]=setTimeout(function(){updateAttachmentStep2(a,b)},100)}
var downloadingStateDisabled={};function setDownloadingStateDisabled(a,b){downloadingStateDisabled[a]=b;var c=window.WindowController.jsAttachmentIDsForMessageID_(a),d;for(d in c){var e=c[d];setAttachmentDownloading(a,e,!1)}var f=window.WindowController.jsAttachedMessageIDsForMessageID_(a),g;for(g in f){var j=f[g],c=window.WindowController.jsAttachmentIDsForMessageID_(j);for(d in c)e=c[d],setAttachmentDownloading(j,e,!1)}}
function isDetailedHeaderVisible(a){a=document.getElementById("Message:"+a+"-detailed-header");return"0px"==a.style.height||""==a.style.height?!1:!0}function setDetailsVisible(a,b){setDetailsVisibleAnimated(a,b,isAnimationEnabled(a))}
function setDetailsVisibleAnimated(a,b,c){var d=document.getElementById("Message:"+a+"-detailed-header"),e=document.getElementById("Message:"+a+"-detailed-header-contents");d.style.webkitTransition=c?"height ease-in-out 300ms":"height ease-in-out 0s";b?(d.style.height=e.clientHeight+"px",d.style.marginTop="5px"):d.style.height="0px";setTimeout('setDetailsVisibleStep2("'+a+'", '+b+")",300)}
function setDetailsVisibleStep2(a,b){document.getElementById("Message:"+a+"-detailed-header").style.marginTop=b?"5px":"0px";updateAllMessageContentsSize()}function toggleDetails(a){isDetailedHeaderVisible(a)?setDetailsVisible(a,!1):setDetailsVisible(a,!0)}function setDetailsVisibleIfExpanded(a,b){isMessageExpanded(a)&&setDetailsVisible(a,b)}function setDragItem(a,b){b.dataTransfer.effectAllowed="copy";b.dataTransfer.setData("text/plain","sparrow-attachment");return!0}
function setDragAddress(a,b,c){console.log("set drag address");b.dataTransfer.effectAllowed="copy";b.dataTransfer.setData("text/plain",decodeURIComponent(c));return!0}function openAttachment(a,b){window.WindowController.jsOpenAttachment_partID_(a,b)}function getBody(){return document.getElementsByTagName("html")[0].outerHTML}var headerRightWidth={},infoButtonWidth=0,topReplyButtonWidth=0;
function cacheTopButtonSize(a){var b=document.getElementById("Message:"+a+"-info-button");null!=b&&(infoButtonWidth=b.offsetWidth);a=document.getElementById("Message:"+a+"-top-reply-button");null!=a&&(topReplyButtonWidth=a.offsetWidth)}function cacheHeaderSize(a){var b=document.getElementById("Message:"+a+"-header-from-right");null!=b&&(console.log("width header right: "+b.offsetWidth),null==headerRightWidth[a]&&(headerRightWidth[a]=b.offsetWidth))}
function applyHeaderSize(a){document.getElementById("Message:"+a+"-header-from-left");var b=document.getElementById("Message:"+a+"-header-from-right"),c=document.getElementById("Message:"+a+"-recipient");document.getElementById("Message:"+a+"-info-button");document.getElementById("Message:"+a+"-top-reply-button");var d=document.getElementById("Message:"+a+"-header-container-left");null!=headerRightWidth[a]&&null!=c&&(a=isMessageExpanded(a)?headerRightWidth[a]:headerRightWidth[a]-infoButtonWidth-topReplyButtonWidth-
5,b.style.width=a+"px",d.style.marginRight=a+20+"px")}function setAttachmentLabelVisible(a,b){document.getElementById("MMAttachment:"+a+":label").style.opacity=b?1:0}
function setAttachmentDownloading(a,b,c){b=document.getElementById("MMAttachment:"+a+":"+b+"-downloading");if(null!=b)if(null!=downloadingStateDisabled&&downloadingStateDisabled[a]&&(c=!1),c){if("inline-block"!=b.style.display){for(b.style.display="inline-block";null!=b.firstChild;)b.removeChild(b.firstChild);showSpinnerInDiv(b)}}else if("none"!=b.style.display)for(b.style.display="none";null!=b.firstChild;)b.removeChild(b.firstChild)}function setMessageUnread(){}
function isBlockQuoteVisible(a){return"none"==document.getElementById(a).style.display?!1:!0}function toggleBlockQuoteVisibility(a,b,c){a.altKey?isBlockQuoteVisible(b,c)?setAllBlockQuoteVisibility(c,!1):setAllBlockQuoteVisibility(c,!0):isBlockQuoteVisible(b,c)?setBlockQuoteVisibility(a,b,c,!1):setBlockQuoteVisibility(a,b,c,!0)}var blockQuoteVisibility=null;
function setBlockQuoteVisibilityToCurrentStateForMessage(a){if(null!=blockQuoteVisibility&&null!=blockQuoteVisibility[a])for(var b in blockQuoteVisibility[a])setBlockQuoteVisibilityToCurrentState(b,a)}function setBlockQuoteVisibilityToCurrentState(a,b){null!=blockQuoteVisibility&&null!=blockQuoteVisibility[b]&&null!=blockQuoteVisibility[b][a]&&setBlockQuoteVisibilityNoAnimation(null,a,b,blockQuoteVisibility[b][a])}
function setBlockQuoteVisibilityNoAnimation(a,b,c,d){a=document.getElementById(b);c=document.getElementById(b+"-label");b=document.getElementById(b+"-label-hide");d?(c.style.display="none",b.style.display="inline-block",a.style.display="block"):(c.style.display="inline-block",b.style.display="none",a.style.display="none");updateAllMessageContentsSizeNow()}
function setBlockQuoteVisibility(a,b,c,d){null==blockQuoteVisibility&&(blockQuoteVisibility={});blockQuoteVisibility[c]={};blockQuoteVisibility[c][b]=d;document.getElementById(b);var a=document.getElementById(b+"-label"),e=document.getElementById(b+"-label-hide");d?(a.style.display="none",e.style.display="inline-block"):(a.style.display="inline-block",e.style.display="none");d?toggleBlockQuoteVisibility_step2(b,c,!0):toggleBlockQuoteVisibility_step2(b,c,!1)}
function toggleBlockQuoteVisibility_step2(a,b,c){b=document.getElementById(a);document.getElementById(a+"-label");document.getElementById(a+"-label-hide");b.style.display=c?"block":"none";updateAllMessageContentsSizeNow()}function setAllBlockQuoteVisibility(a,b){var c=document.getElementById("Message:"+a+"-body");null!=c&&setAllBlockQuoteVisibilityForNode(a,c,b)}
function setAllBlockQuoteVisibilityForNode(a,b,c){for(b=b.firstChild;null!=b;){var d;d=b.nextSibling;b.nodeType==Node.ELEMENT_NODE&&("blockquote"==b.tagName.toLowerCase()&&null!=b.getAttribute("type")&&"cite"==b.getAttribute("type").toLowerCase()&&setBlockQuoteVisibility(null,b.id,a,c),setAllBlockQuoteVisibilityForNode(a,b,c));b=d}}function noevent(a){a.preventDefault();a.stopPropagation()}
function isReplyBarVisible(a){var b=document.getElementById("Message:"+a+"-replybar");if(null==b)return 1;b=0<b.visibilityCount;isMessageExpanded(a)||(b=0);return b}
function applyReplyBarVisibility(a){var b;b=isReplyBarVisible(a);var c=document.getElementById("Message:"+a+"-replybar");null!=c&&(c.style.opacity=b?1:0,c=document.getElementById("Message:"+a+"-top-reply-button"),c.style.opacity=b?1:isMessageExpanded(a)?1:0,c=document.getElementById("Message:"+a+"-info-button"),c.style.opacity=b?1:isMessageExpanded(a)?1:0,c=document.getElementById("Message:"+a+"-detailed-header-arrow"),c.style.opacity=b?1:isMessageExpanded(a)?1:0)}
function setReplyBarVisible(a,b){var c=document.getElementById("Message:"+a+"-replybar");null!=c&&(null==c.visibilityCount?c.visibilityCount=b?1:0:b?c.visibilityCount++:c.visibilityCount--,applyReplyBarVisibility(a))}function toggleDetailsWithEvent(a,b){isMessageExpanded(b)&&(toggleDetails(b),a.stopPropagation())}function reply(a,b){window.WindowController.jsReply_locationX_locationY_(b,a.pageX,a.pageY)}
function replyall(a,b){window.WindowController.jsReplyAll_locationX_locationY_(b,a.pageX,a.pageY)}function forward(a,b){window.WindowController.jsForward_locationX_locationY_(b,a.pageX,a.pageY)}function saveAllAttachements(a){window.WindowController.jsToolbarSaveAllAttachments_(a)}function setFavoriteWithEvent(a,b,c){isMessageExpanded(b)&&(setFavorite(b,c),a.stopPropagation())}function setFavorite(a,b){setFavoriteViewEnabled(a,b);window.WindowController.jsSetFavorite_enabled_(a,b)}
function setFavoriteViewEnabled(a,b){var c=document.getElementById("Message:"+a+"-favorite-on");if(null!=c){var d=document.getElementById("Message:"+a+"-favorite-off");null!=d&&(window.WindowController.jsFavoriteHidden()?(d.style.display="none",c.style.display="none"):b?(d.style.display="none",c.style.display="inline"):(d.style.display="inline",c.style.display="none"))}}
var currentQuickReplyMessageID=null,currentQuickReplySending=!1,currentQuickReplySent=!1,currentQuickReplySaved=!1,currentQuickReplyArchiveEnabled=!1;
function handleDeleteKey(a){if(!a.shiftKey)if(a.metaKey){if(window.WindowController.jsDeleteKeyIsDelete()){if(window.WindowController.jsArchiveConversationEnabled())return window.WindowController.jsArchiveConversation(),a.preventDefault(),a.stopPropagation(),!0}else if(window.WindowController.jsDeleteConversationEnabled())return window.WindowController.jsDeleteConversation(),a.preventDefault(),a.stopPropagation(),!0;window.WindowController.jsBeep()}else if(!a.ctrlKey&&!a.altKey){if(window.WindowController.jsDeleteKeyIsDelete()){if(window.WindowController.jsDeleteConversationEnabled())return window.WindowController.jsDeleteConversation(),
a.preventDefault(),a.stopPropagation(),!0}else if(window.WindowController.jsArchiveConversationEnabled())return window.WindowController.jsArchiveConversation(),a.preventDefault(),a.stopPropagation(),!0;window.WindowController.jsBeep()}return!1}
function handleAccelerator(a){var b,c=!1;b=!1;null!=currentQuickReplyMessageID&&!currentQuickReplySending&&(13==a.keyCode?a.metaKey&&(sendAndArchiveEnabled?sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!0):sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!1),a.preventDefault(),a.stopPropagation(),b=!0):68==a.keyCode?a.metaKey&&a.shiftKey&&(sendAndArchiveEnabled?sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!0):sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!1),a.preventDefault(),
a.stopPropagation(),b=!0):27==a.keyCode&&(b=getQuickReplyContents(currentQuickReplyMessageID),(""==b||"<br>"==b)&&cancelQuickReplyClicked(a,currentQuickReplyMessageID),a.preventDefault(),a.stopPropagation(),b=!0));if((null==currentQuickReplyMessageID||currentQuickReplySending||!isQuickReplySelected(window.getSelection().anchorNode))&&!b)if(a=a?a:window.event?event:null){var d=scrollingBody;b=null==d?0:d.scrollTop;46==a.keyCode&&handleDeleteKey(a);12==a.keyCode&&handleDeleteKey(a);8==a.keyCode&&handleDeleteKey(a);
9==a.keyCode&&(window.WindowController.jsFocusNextKeyView(),a.preventDefault());37==a.keyCode&&(window.WindowController.jsFocusMessageList(),a.preventDefault());38==a.keyCode&&!a.metaKey&&(d.scrollTop-=30,scrollingShowScroller(),a.preventDefault());40==a.keyCode&&!a.metaKey&&(d.scrollTop+=30,scrollingShowScroller(),c=!0,a.preventDefault());33==a.keyCode&&!a.metaKey&&(d.scrollTop=d.scrollTop-d.clientHeight+10,scrollingShowScroller(),a.preventDefault());34==a.keyCode&&!a.metaKey&&(d.scrollTop=d.scrollTop+
d.clientHeight-10,scrollingShowScroller(),c=!0,a.preventDefault());32==a.keyCode&&(a.shiftKey?(d.scrollTop=d.scrollTop-d.clientHeight+10,scrollingShowScroller()):window.WindowController.jsHasAttachmentSelection()?window.WindowController.jsToggleQuicklook():window.WindowController.jsIsWindowMode()?window.WindowController.jsCloseWindow():(d.scrollTop=d.scrollTop+d.clientHeight-10,scrollingShowScroller(),c=!0),a.preventDefault());35==a.keyCode&&!a.metaKey&&(d.scrollTop=d.scrollHeight-d.clientHeight,
scrollingShowScroller(),c=!0,a.preventDefault());36==a.keyCode&&!a.metaKey&&(d.scrollTop=0,scrollingShowScroller(),a.preventDefault());27==a.keyCode&&(window.WindowController.jsIsSearchVisible()?window.WindowController.jsHideSearch():window.WindowController.jsExitFullScreen()||window.WindowController.jsCloseWindow(),a.preventDefault());13==a.keyCode&&window.WindowController.jsIsSearchVisible()&&(window.WindowController.jsFindNext(),a.preventDefault());76==a.keyCode&&a.metaKey&&(window.WindowController.jsShowQuickLabel(a),
a.preventDefault());c?b==d.scrollTop&&(goDownBlocked?(expandAllMessages(),goDownBlocked=!1):goDownBlocked=!0):goDownBlocked=!1}}
function handleKeypress(a){null!=currentQuickReplyMessageID&&isQuickReplySelected(window.getSelection().anchorNode)?(console.log("is quick reply "+a.keyCode),174==a.keyCode||8240==a.keyCode?(toggleQuickReplyAll(currentQuickReplyMessageID),a.preventDefault(),a.stopPropagation()):206==a.keyCode&&(a.altKey&&a.shiftKey)&&(sendAndArchiveEnabled?sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!1):sendQuickReplyAndArchive(a,currentQuickReplyMessageID,!0),a.preventDefault(),a.stopPropagation())):window.WindowController.jsHandleShortcut_(a)&&
(a.preventDefault(),a.stopPropagation())}document.onkeypress=handleKeypress;document.onkeydown=handleAccelerator;function showMenu(a,b){if(isMessageExpanded(b)){console.log("show menu");var c=getReplyButtonAbsoluteX(b)+30,d=getReplyButtonAbsoluteY(b)+getReplyButtonHeight(b)+7;window.WindowController.jsShowMenu_locationX_locationY_(b,c,d);a.preventDefault();a.stopPropagation()}}
function menuReply(a,b){if(window.WindowController.jsQuickReplyDisabled()){if(!isMessageExpanded(b))return;window.WindowController.jsMenuReply_locationX_locationY_(b,a.pageX,a.pageY)}else showQuickReply(b);a.preventDefault();a.stopPropagation()}
function clickedOnAttachment(a,b,c){var d=!1;0==a.button&&a.ctrlKey&&(d=!0);2==a.button&&(d=!0);d?(window.WindowController.jsSetSelectedAttachmentWithMessageID_partID_(b,c),showAttachmentMenu(a,b,c)):(window.WindowController.jsSetSelectedAttachmentWithMessageID_partID_(b,c),a.stopPropagation())}
function showAttachmentMenu(a,b,c){console.log("attachment menu "+a.button+" "+a.which+" "+a.ctrlKey);var d=!1;0==a.button&&a.ctrlKey&&(d=!0);2==a.button&&(d=!0);d&&(window.WindowController.jsShowAttachmentMenu_partID_locationX_locationY_(b,c,a.pageX,a.pageY),a.preventDefault(),a.stopPropagation())}
function showAddressMenu(a,b,c){window.getSelection().removeAllRanges();console.log("show menu "+b+" "+c);window.WindowController.jsShowAddressMenu_mailbox_locationX_locationY_(b,c,a.pageX,a.pageY);a.stopPropagation();a.preventDefault()}function windowResized(){windowResizedScroll();windowResized2()}function windowResized2(){null!=window.WindowController&&updateAllMessageContentsSizeNow();windowResized3()}function windowResized3(){null!=window.WindowController&&quickReplyWindowResize()}
function hideMessage(a){window.WindowController.jsExcludeMessageID_(a);var b=document.getElementById("Message:"+a);document.getElementById("Message:"+a+"-padding");b.style.webkitTransition="all 0ms ease-in-out";b.style.height=b.clientHeight+"px";setTimeout("hideMessageStep2('"+a+"')",0)}
function hideMessageStep2(a){var b=document.getElementById("Message:"+a),c=document.getElementById("Message:"+a+"-padding");b.style.webkitTransition="all 300ms ease-in-out";b.style.opacity=0;b.style.height="0px";null!=c&&(c.style.height="0px");setTimeout("hideMessageStep3('"+a+"')",300)}
function hideMessageStep3(a){var b=document.getElementById("Message:"+a),a=document.getElementById("Message:"+a+"-padding");b.style.webkitTransition="all 0ms ease-in-out";b.style.display="none";null!=a&&(a.style.display="none")}function setReplyBarVisibleForFirstMessage(a){var b=window.WindowController.jsMessageIDs();setReplyBarVisible(b[0],a)}function menuDraft(a,b){isMessageExpanded(b)&&(window.WindowController.jsEditMessage_(b),a.preventDefault(),a.stopPropagation())}
function showDraftMenu(a,b){if(isMessageExpanded(b)){console.log("show menu");var c=getReplyButtonAbsoluteX(b)+30,d=getReplyButtonAbsoluteY(b)+getReplyButtonHeight(b)+7;window.WindowController.jsShowDraftMenu_locationX_locationY_(b,c,d);a.preventDefault();a.stopPropagation()}}var doneOnceForThisWidth=0;function cacheClearWindowResizeCache(){doneOnceForThisWidth=0}
function windowResizedScroll(){var a=document.getElementById("title"),b=document.getElementById("labels"),c=document.getElementById("conversation-subject");if(doneOnceForThisWidth!=window.innerWidth){300<b.clientWidth&&(b.style.width="300px");a.style.width=window.innerWidth-b.clientWidth-40+"px";var d=0,d=b.clientHeight,b=0,b=a.clientHeight;console.log("labels "+d);console.log("use msg title "+b);d-=5;21<d&&d++;b++;b>d&&(d=b);c.style.height=d+"px";doneOnceForThisWidth=window.innerWidth}goDownBlocked=
!1;windowResizedScrollTimerFunc()}function windowResizedScrollTimerFunc(){}function isNodeTextContents(a){for(;null!=a;){var b;b=a.className;if(null!=b&&(-1!=b.indexOf("-sparrow-messageBodyTextContents")||-1!=b.indexOf("-sparrow-selectableHeaderValue")||-1!=b.indexOf("-sparrow-quickReplyTextContents")))return!0;a=a.parentNode}return!1}function isRangeTextContents(a){return isNodeTextContents(a.commonAncestorContainer)}
function isSelectionTextContents(){for(var a=document.getSelection(),b=0;b<a.rangeCount;b++){var c=a.getRangeAt(b);if(isRangeTextContents(c))return!0}return!1}function getAbsoluteY(a){for(var b=0;null!=a;)b+=a.offsetTop,a=a.offsetParent,null!=a&&(b-=a.scrollTop);return b}function getAbsoluteX(a){for(var b=0;null!=a;)b+=a.offsetLeft,a=a.offsetParent,null!=a&&(b-=a.scrollLeft);return b}
function getReplyButtonAbsoluteX(a){a=document.getElementById("Message:"+a+"-top-reply-button");return getAbsoluteX(a)}function getReplyButtonAbsoluteY(a){a=document.getElementById("Message:"+a+"-top-reply-button");return getAbsoluteY(a)}function getReplyButtonWidth(a){return document.getElementById("Message:"+a+"-top-reply-button").clientWidth}function getReplyButtonHeight(a){return document.getElementById("Message:"+a+"-top-reply-button").clientHeight}
function isAnimationEnabled(a){return document.getElementById("Message:"+a+"-contents-animated").animationEnabled}
function setAnimationEnabled(a,b){var c=document.getElementById("Message:"+a+"-contents-animated"),d=document.getElementById("Message:"+a+"-recipient"),e=document.getElementById("Message:"+a+"-info-button"),f=document.getElementById("Message:"+a+"-top-reply-button"),g=document.getElementById("Message:"+a+"-replybar"),j=document.getElementById("Message:"+a+"-header-from-right"),h=document.getElementById("Message:"+a+"-header-container-left");null!=c&&(b?(c.style.webkitTransition="height 300ms ease-in-out",
c.animationEnabled=!0,d.style.webkitTransition="width ease-in-out 300ms",e.style.webkitTransition="opacity ease-in-out 300ms",f.style.webkitTransition="opacity ease-in-out 300ms",g.style.webkitTransition="opacity ease-in-out 300ms",j.style.webkitTransition="width ease-in-out 300ms",h.style.webkitTransition="margin-right ease-in-out 300ms"):(c.style.webkitTransition="none",c.animationEnabled=!1,d.style.webkitTransition="none",e.style.webkitTransition="none",f.style.webkitTransition="none",g.style.webkitTransition=
"none",j.style.webkitTransition="none",h.style.webkitTransition="none"))}function becomeActive(){}function resignActive(){}function expandAllMessages(){window.WindowController.jsExpandAllMessages()}function collapseAllMessages(){window.WindowController.jsCollapseAllMessages()}function isAttachmentSelected(a,b){return"-sparrow-messageAttachmentContainerSelected"==document.getElementById("MMAttachmentContainer:"+b).className?!0:!1}
function updateAttachmentSize(a,b){var c=document.getElementById("MMAttachmentContainer:"+a+":"+b),d=document.getElementById("MMAttachment:"+a+":"+b),e=document.getElementById("MMAttachment:"+a+":"+b+"-downloading");if(null==d||null==c||null==e)return!1;if(20==d.clientWidth||20==d.clientHeight)return!0;c.style.width=d.clientWidth+"px";c.style.height=d.clientHeight+"px";return!1}
function setAttachmentSelected(a,b,c){var d=document.getElementById("MMAttachmentContainer:"+a+":"+b);null==d?console.log("not found MMAttachmentContainer:"+a+":"+b):d.className=c?"-sparrow-messageAttachmentContainerSelected":"-sparrow-messageAttachmentContainer"}function deselectAllAttachment(){window.WindowController.jsSetSelectedAttachmentWithMessageID_partID_(null,null)}function getAttachmentAbsoluteX(a){a=document.getElementById("MMAttachment:"+a);return null==a?null:getAbsoluteX(a)}
function getAttachmentAbsoluteY(a){a=document.getElementById("MMAttachment:"+a);return null==a?null:getAbsoluteY(a)}function getAttachmentWidth(a){a=document.getElementById("MMAttachment:"+a);return null==a?null:a.clientWidth}function getAttachmentHeight(a){a=document.getElementById("MMAttachment:"+a);return null==a?null:a.clientHeight}function deleteLabel(a){window.WindowController.jsDeleteLabel_(a)}function removeImportant(){window.WindowController.jsRemoveImportant()}
function updateLabels(a){document.getElementById("labels").innerHTML=a;cacheClearWindowResizeCache()}function getAddLabelButtonAbsoluteX(){var a=document.getElementById("labeladd");return getAbsoluteX(a)}function getAddLabelButtonAbsoluteY(){var a=document.getElementById("labeladd");return getAbsoluteY(a)}function getAddLabelButtonWidth(){return document.getElementById("labeladd").clientWidth}function getAddLabelButtonHeight(){return document.getElementById("labeladd").clientHeight}
function showAddLabelMenu(a){console.log("show menu");var b=getAddLabelButtonAbsoluteX(),c=getAddLabelButtonAbsoluteY()+getAddLabelButtonHeight()+5;window.WindowController.jsShowAddLabelMenuAtlocationX_locationY_(b,c);null!=a&&(a.preventDefault(),a.stopPropagation())}
function showMoveMenu(a){console.log("show menu");var b=getAddLabelButtonAbsoluteX(),c=getAddLabelButtonAbsoluteY()+getAddLabelButtonHeight()+5;window.WindowController.jsShowMoveMenuAtlocationX_locationY_(b,c);null!=a&&(a.preventDefault(),a.stopPropagation())}
function showConversationUpdate(a,b,c,d){c=document.getElementById("updateConversationButton");if(null!=c)if(0!=a&&0!=b){var e;e=1<a?"This conversation has "+a+" new messages, ":"This conversation has 1 new message, ";c.innerHTML=1<b?e+(""+b+" message removed."):e+"1 message removed.";c.style.display="inline-block"}else 0!=a&&0==b?(c.innerHTML=1<a?"This conversation has "+a+" new messages":"This conversation has 1 new message",c.style.display="inline-block"):0==a&&0!=b?(c.innerHTML=1<b?"This conversation has "+
b+" messages removed.":"This conversation has 1 message removed.",c.style.display="inline-block"):c.style.display="none";0<a&&showNotificationBar(d)}function showNotificationBar(a){document.getElementById("notificationBar").style.top="0px";document.getElementById("notificationBarSender").innerHTML=a}function hideNotificationBar(){var a=document.getElementById("notificationBar");a.style.top=-(a.clientHeight+5)+"px"}
function updateConversation(){"0px"==document.getElementById("notificationBar").style.top?(hideNotificationBar(),setTimeout(function(){updateConversationAfterDelay()},500)):updateConversationAfterDelay()}function updateConversationAfterDelay(){window.WindowController.jsUpdateConversation();isSortOrderFromOlderToNewer()?scrollToLastMessageAfterDelay():scrollToFirstMessageAfterDelay()}function closeUpdateNotification(){window.WindowController.jsIgnoreConversationUpdate();hideNotificationBar()}
function setupConversationViewer(){var a=document.getElementById("notificationBarText");null!=a&&a.addEventListener("click",function(){updateConversation()},!0);a=document.getElementById("remoteImagesOnceButton");null!=a&&a.addEventListener("click",function(){showRemoteImagesOnce()},!0);a=document.getElementById("remoteImagesAlwaysButton");null!=a&&a.addEventListener("click",function(){showRemoteImagesAlways()},!0);scrollingWindowResizedCallback=windowResized;window.WindowController.jsUseWebKitScroll()?
(scrollingBody=document.body,document.body.style.overflow="auto",a=document.getElementById("vertical-scrollbar"),a.style.display="none",a=document.getElementById("main-body"),a.id=null,a=document.getElementById("notificationBar"),a.style.position="fixed",window.addEventListener("scroll",function(){windowScrolled()},!1),window.addEventListener("resize",function(){windowResized()},!1)):setupScrollbar(0,0);scrollingBody.addEventListener("scroll",function(){windowScrolled()},!1)}
function windowScrolled(){var a=window.WindowController.jsMessageIDs(),b=null,c;for(c in a){var d=a[c],e=document.getElementById("Message:"+d),f=getAbsoluteY(e);isMessageExpanded(d)&&(f<window.innerHeight&&f+e.clientHeight>window.innerHeight)&&(b=d)}for(c in a)d=a[c],e=document.getElementById("Message:"+d+"-horizontal-bottom-scrollbar"),null!=e&&(f=document.getElementById("Message:"+d+"-horizontal-inline-scrollbar"),null!=f&&(hasHorizontalScrollerForMsg(d)?d==b?(e.style.opacity=1,f.style.opacity=
0):(e.style.opacity=0,f.style.opacity=1):(e.style.opacity=0,f.style.opacity=0)))}function setupHorizontalScroller(){windowScrolled()}function hasHorizontalScrollerForMsg(a){a=document.getElementById("Message:"+a+"-horizontal-scrollview");if(null!=a)return null!=a.inlineScrollWindow}
function setupHorizontalScrollerForMsg(a){var b=document.getElementById("Message:"+a+"-horizontal-scrollview");null!=b&&null==b.inlineScrollWindow&&(b.inlineScrollWindow=new MMScrollWindow("Message:"+a+"-horizontal-scrollview","Message:"+a+"-horizontal-inline-scrollbar",null),b.bottomScrollWindow=new MMScrollWindow("Message:"+a+"-horizontal-scrollview","Message:"+a+"-horizontal-bottom-scrollbar",null))}
var scrollDestination,scrollStart,scrollStartTime,scrollToMessageID=null,scrollTimeStep=1E3/60,scrollTimer=null;function scrollToMessage(a){var b=document.getElementById("Message:"+a);scrollStart=scrollingBody.scrollTop;scrollDestination=b.offsetTop;scrollStartTime=(new Date).getTime();scrollToMessageID=a;scrollToMessageNext()}function mmEaseIn(a){return Math.pow(a,3)}function mmEaseOut(a){return Math.pow(a-1,3)+1}
function mmEaseInOut(a){return 1>2*a?0.5*Math.pow(2*a,3):0.5*(Math.pow(2*a-2,3)+2)}function scrollToMessageNext(){var a,b;null!=scrollTimer&&(clearTimeout(scrollTimer),scrollTimer=null);b=((new Date).getTime()-scrollStartTime)/300;a=mmEaseInOut(b);scrollingBody.scrollTop=scrollStart+(scrollDestination-scrollStart)*a;1<=b?(scrollingBody.scrollTop=scrollDestination,scrollToMessageID=null):scrollTimer=setTimeout(function(){scrollTimer=null;scrollToMessageNext()},scrollTimeStep)}
function isMessageIsLast(a){var b=window.WindowController.jsMessageIDs(),b=b[b.length-1];console.log("lastMsgID:"+b+" this:"+a);return b==a}function scrollToLastMessageAfterDelay(){1!=window.WindowController.jsMessageIDs().length&&setTimeout(function(){scrollToLastMessage()},300)}function scrollToLastMessage(){var a=window.WindowController.jsMessageIDs();scrollToMessage(a[a.length-1])}
function isMessageIsFirst(a){var b=window.WindowController.jsMessageIDs()[0];console.log("lastMsgID:"+b+" this:"+a);return b==a}function scrollToFirstMessageAfterDelay(){1!=window.WindowController.jsMessageIDs().length&&setTimeout(function(){scrollToFirstMessage()},300)}function scrollToFirstMessage(){var a=window.WindowController.jsMessageIDs()[0];scrollToMessage(a)}
function applyZoom(a){var b=window.WindowController.jsMessageIDs(),c;for(c in b){var d=document.getElementById("Message:"+b[c]+"-body");null!=d&&(d.style.zoom=a+"%")}updateAllMessageContentsSize()}function isQuickReplySelected(a){for(;null!=a;){if("-sparrow-quickReplyTextContents"==a.className)return!0;a=a.parentNode}return!1}var quickReplyAll={};
function scrollToQuickReply(a){a=document.getElementById("QuickReply:"+a);scrollStart=scrollingBody.scrollTop;scrollDestination=a.offsetTop;scrollStartTime=(new Date).getTime();scrollToMessageNext()}function scrollToQuickReplyIfNeeded(a){if(document.getElementById("QuickReply:"+a).offsetTop>=scrollingBody.scrollTop)return!1;scrollToQuickReply(a);return!0}
function scrollToClosedQuickReplyAtBottom(a){a=document.getElementById("QuickReply:"+a);return a.offsetTop>=scrollingBody.scrollTop&&a.offsetTop<=scrollingBody.scrollTop+scrollingBody.clientHeight||a.offsetTop+126>=scrollingBody.scrollTop&&a.offsetTop+126<=scrollingBody.scrollTop+scrollingBody.clientHeight?!1:!0}
function scrollToQuickReplyAtBottomIfNeeded(a){var b,c=document.getElementById("QuickReply:"+a),a=!1;c.offsetTop>=scrollingBody.scrollTop&&c.offsetTop<=scrollingBody.scrollTop+scrollingBody.clientHeight&&(a=!0);b=!1;c.offsetTop+c.clientHeight>=scrollingBody.scrollTop&&c.offsetTop+c.clientHeight<=scrollingBody.scrollTop+scrollingBody.clientHeight&&(b=!0);if(!a||!b)scrollStart=scrollingBody.scrollTop,scrollDestination=c.offsetTop-(scrollingBody.clientHeight-c.clientHeight),scrollStartTime=(new Date).getTime(),
scrollToMessageNext()}function genericShowQuickReply(a,b){isSortOrderFromOlderToNewer()?scrollToClosedQuickReplyAtBottom(a)?genericShowQuickReplyAtBottomNow(a,b):genericShowQuickReplyAtBottomAfterDelay(a,b):scrollToQuickReplyIfNeeded(a)?setTimeout(function(){genericShowQuickReplyAfterDelay(a,b)},500):genericShowQuickReplyAfterDelay(a,b)}var lastQuickReplySize=0;
function genericShowQuickReplyAtBottomNow(a,b){genericShowQuickReplyAfterDelayFull(a,b,!1,!1);lastQuickReplySize=0;scrollToQuickReplyAtBottomIfNeeded(a);genericShowQuickReplySelectContents(a)}function genericShowQuickReplyAtBottomAfterDelay(a,b){genericShowQuickReplyAfterDelayFull(a,b,!1,!0);setTimeout(function(){scrollToQuickReplyAtBottomIfNeeded(a);genericShowQuickReplySelectContents(a)},300)}function genericShowQuickReplyAfterDelay(a,b){genericShowQuickReplyAfterDelayFull(a,b,!0,!0)}
function genericShowQuickReplyAfterDelayFull(a,b,c,d){if(!currentQuickReplySending)if(currentQuickReplyMessageID==a)toggleQuickReplyAll(a);else{cancelCurrentQuickReply();currentQuickReplyMessageID=a;quickReplyAll[a]=b;applyQuickReplyAll(a);window.WindowController.jsUpdateQuickReplyRecipient_(a);var b=document.getElementById("QuickReply:"+a),e=document.getElementById("QuickReply:"+a+"-contents"),f=document.getElementById("QuickReply:"+a+"-progress"),g=document.getElementById("QuickReply:"+a+"-editor");
null!=e&&(e.style.webkitTransition="opacity ease-in-out 0s",f.style.webkitTransition="opacity ease-in-out 0s",e.style.opacity=1,f.style.opacity=0);null!=g&&(g.innerHTML="",b.style.webkitTransition=d?"height ease-in-out 300ms":"height ease-in-out 0ms",b.style.height=e.clientHeight+20+"px",c&&genericShowQuickReplySelectContents(a));currentQuickReplySaved=!1;window.WindowController.jsUpdateCharCount()}}
function genericShowQuickReplySelectContents(a){document.getElementById("QuickReply:"+a);a=document.getElementById("QuickReply:"+a+"-editor");if(null!=a){var b=scrollingBody.scrollTop;a.focus();var c=document.createRange();c.selectNodeContents(a);window.getSelection().removeAllRanges();window.getSelection().addRange(c);scrollingBody.scrollTop=b}}function showQuickReply(a){genericShowQuickReply(a,window.WindowController.jsReplyAllEnabled())}
function showQuickReplyAll(a){genericShowQuickReply(a,!0)}function showQuickReplyNormal(a){genericShowQuickReply(a,!1)}function toggleQuickReplyAll(a){quickReplyAll[a]=!quickReplyAll[a];applyQuickReplyAll(a);window.WindowController.jsUpdateQuickReplyRecipient_(a);window.WindowController.jsUpdateCharCount();document.getElementById("QuickReply:"+a+"-editor").focus()}
function applyQuickReplyAll(a){if(window.WindowController.jsCanReplyAll_(a))quickReplyAll[a]?(b=document.getElementById("QuickReply:"+a+"-replyall"),b.style.display="inline-block",b=document.getElementById("QuickReply:"+a+"-replynormal"),b.style.display="none"):(b=document.getElementById("QuickReply:"+a+"-replyall"),b.style.display="none",b=document.getElementById("QuickReply:"+a+"-replynormal"),b.style.display="inline-block");else{var b=document.getElementById("QuickReply:"+a+"-replyall");null!=
b&&(b.style.display="none");b=document.getElementById("QuickReply:"+a+"-replynormal");null!=b&&(b.style.display="none")}}function cancelQuickReplyClicked(a,b){currentQuickReplySaved=!0;cancelQuickReply(a,b)}
function cancelQuickReply(a,b){currentQuickReplySaved||(currentQuickReplySaved=!0,console.log("save message "+b),window.WindowController.jsSaveQuickReply_contents_replyAll_(b,getQuickReplyContents(b),quickReplyAll[b]));console.log("close QR "+b);var c=document.getElementById("QuickReply:"+b);c.style.webkitTransition="height ease-in-out 300ms";c.style.height="0px";currentQuickReplyMessageID=null;currentQuickReplySending=!1}function hasQuickReply(){return null!=currentQuickReplyMessageID}
function cancelCurrentQuickReply(){console.log("cancel current QR "+currentQuickReplyMessageID);null!=currentQuickReplyMessageID&&cancelQuickReply(null,currentQuickReplyMessageID)}function getCurrentQuickReplyMessageID(){return currentQuickReplyMessageID}function getCurrentQuickReplyAllEnabled(){return quickReplyAll[currentQuickReplyMessageID]}
function setQuickReplyCharCounter(a,b){console.log("update counter "+a+" "+b);var c=document.getElementById("QuickReply:"+a+"-counter");null!=c&&(-1==b?c.innerHTML="":(c.style.color=0<b?"#aaa":"#f88",c.innerHTML=b),quickReplyWindowResize())}
function resizeQuickReply(a){var b=document.getElementById("QuickReply:"+a),c=document.getElementById("QuickReply:"+a+"-contents");0!=b.clientHeight&&(b.style.webkitTransition="all ease-in-out 0ms",b.style.height=c.clientHeight+20+"px",setTimeout(function(){resizeQuickReplyStep2(a)}))}function resizeQuickReplyStep2(a){document.getElementById("QuickReply:"+a).style.webkitTransition="height ease-in-out 300ms";scrollToQuickReplyAtBottomIfNeeded(a)}var sendAndArchiveEnabled=!1;
function setSendAndArchiveEnabled(a){sendAndArchiveEnabled=a}
function setQuickReplyEnabled(a,b){var c;if(sendAndArchiveEnabled){if(c=document.getElementById("QuickReply:"+a+"-sendbutton"),null!=c&&(c.className=b?"-sparrow-buttonSendOnly":"-sparrow-buttonSendOnlyDisabled"),c=document.getElementById("QuickReply:"+a+"-sendandarchivebutton"),null!=c&&(c.className=b?"-sparrow-buttonSend":"-sparrow-buttonSendDisabled",c.style.display="inline-block"),c=document.getElementById("QuickReply:"+a+"-sendandarchivebutton-separator"),null!=c)c.style.display="inline-block"}else if(c=
document.getElementById("QuickReply:"+a+"-sendbutton"),null!=c&&(c.className=b?"-sparrow-buttonSend":"-sparrow-buttonSendDisabled"),c=document.getElementById("QuickReply:"+a+"-sendandarchivebutton"),null!=c&&(c.style.display="none"),c=document.getElementById("QuickReply:"+a+"-sendandarchivebutton-separator"),null!=c)c.style.display="none"}
function getQuickReplyContents(a){for(var a=document.getElementById("QuickReply:"+a+"-editor"),b=a.firstChild;null!=b;)next=b.nextSibling,1==b.nodeType&&"meta"==b.tagName.toLowerCase()&&b.parentNode.removeChild(b),b=next;return a.innerHTML}var quickReplyTimer=null;function sendQuickReply(a,b){sendQuickReplyAndArchive(a,b,!1)}
function sendQuickReplyAndArchive(a,b,c){console.log("send message "+b);a=document.getElementById("QuickReply:"+b+"-sendbutton");"-sparrow-buttonSendDisabled"!=a.className&&"-sparrow-buttonSendOnlyDisabled"!=a.className&&(document.getElementById("QuickReply:"+b+"-editor"),currentQuickReplySaved=!0,window.WindowController.jsCanSendQuickReply_contents_(b,getQuickReplyContents(b))&&(currentQuickReplySending=!0,currentQuickReplySent=!1,currentQuickReplyArchiveEnabled=c,showSendingFeedback(b)))}
var quickReplySending=!1;
function showSendingFeedback(a){document.getElementById("QuickReply:"+a+"-sending").style.display="block";document.getElementById("QuickReply:"+a+"-sent").style.display="none";var b=document.getElementById("QuickReply:"+a+"-progress");document.getElementById("QuickReply:"+a).style.height=b.clientHeight+"px";var c=document.getElementById("QuickReply:"+a+"-contents");c.style.webkitTransition="opacity ease-in-out 300ms";b.style.webkitTransition="opacity ease-in-out 300ms";c.style.opacity=0;quickReplySending=
!0;quickReplyTimer=setTimeout(function(){showSendingFeedbackDone(a)},300)}var quickReplySendingStarted=!1;function showSendingFeedbackDone(a){document.getElementById("QuickReply:"+a+"-progress").style.opacity=1;quickReplySendingStarted=!0;quickReplyTimer=setTimeout(function(){showSendingFeedbackDoneStep2(a)},0)}
function showSendingFeedbackDoneStep2(a){quickReplyTimer=null;window.WindowController.jsSendQuickReply_contents_replyAll_archiveEnabled_(a,getQuickReplyContents(a),quickReplyAll[a],currentQuickReplyArchiveEnabled);quickReplySending=!1}
function showSendingFeedbackFinished(){if(quickReplySendingStarted){var a=currentQuickReplyMessageID;document.getElementById("QuickReply:"+a+"-sending").style.display="none";document.getElementById("QuickReply:"+a+"-sent").style.display="block";quickReplySendingStarted=!1;currentQuickReplySent=!0}}
function sendQuickReplyNowBeforeClosing(){quickReplySending&&(null!=quickReplyTimer&&(clearTimeout(quickReplyTimer),quickReplyTimer=null),quickReplySending=!1,showSendingFeedbackDoneStep2(currentQuickReplyMessageID),currentQuickReplyMessageID=null)}
function openInComposer(a,b){currentQuickReplySaved=!0;console.log("open in composer "+b);document.getElementById("QuickReply:"+b+"-editor");null==a?window.WindowController.jsOpenInComposer_contents_replyAll_locationX_locationY_(b,getQuickReplyContents(b),quickReplyAll[b],0,0):window.WindowController.jsOpenInComposer_contents_replyAll_locationX_locationY_(b,getQuickReplyContents(b),quickReplyAll[b],a.pageX,a.pageY);cancelQuickReply(a,b)}
function quickReplyWindowResize(){var a=window.WindowController.jsMessageIDs(),b=0,c;for(c in a){var d=a[c],d=document.getElementById("QuickReply:"+d+"-buttonscontainer");0==b&&(b=null!=d?d.clientWidth:0)}for(c in a){var d=a[c],e=document.getElementById("QuickReply:"+d+"-recipient");document.getElementById("QuickReply:"+d+"-counter");null!=e&&(e.style.width=window.innerWidth-b-40+"px")}}
function updateQuickReplyRecipient(a,b,c,d){console.log("update ["+a+"] ["+b+"] ["+c+"]");var e=document.getElementById("QuickReply:"+a+"-recipient");null!=e&&(e.innerHTML=quickReplyAll[a]?"<b>"+d+"</b> "+c:"<b>"+d+"</b> "+b)}function scrollToTop(){scrollStart=scrollingBody.scrollTop;scrollDestination=0;scrollStartTime=(new Date).getTime();scrollToMessageNext()}
function scrollToBottom(){scrollStart=scrollingBody.scrollTop;scrollDestination=scrollingBody.scrollHeight;scrollStartTime=(new Date).getTime();scrollToMessageNext()}
function goToNextMessage(){var a=window.WindowController.jsMessageIDs(),b=!1,c=null,d;console.log("next message");if(null!=scrollToMessageID){console.log("has scroll msg "+scrollToMessageID);for(var e in a)c=a[e],c==scrollToMessageID&&parseInt(e)+1<a.length&&(b=!0,d=parseInt(e)+1,c=a[d],console.log("got to next msg "+c))}if(!b)for(e in a){var c=a[e],f=document.getElementById("Message:"+c),g=getAbsoluteY(f);console.log("msg "+g+" "+(g+f.clientHeight)+" "+window.innerHeight);if(isMessageExpanded(c)){if(0<
g&&0<e&&f.offsetTop<scrollingBody.scrollHeight-window.innerHeight){b=!0;d=e;break}}else if(g<=window.innerHeight){b=!0;d=e;break}}b?(d=parseInt(d),isMessageExpanded(a[d])?scrollToMessage(a[d]):(scrollToMessageID=a[d],setMessageExpanded(a[d],!0),updateAllMessageContentsSizeNow(),setTimeout(function(){scrollToMessage(a[d])},300))):scrollToBottom()}
function goToPreviousMessage(){var a=window.WindowController.jsMessageIDs(),b=!1,c;if(null!=scrollToMessageID)for(var d in a){var e=a[d];e==scrollToMessageID&&0<d&&(b=!0,c=d-1)}if(!b)for(d in a)e=a[d],e=document.getElementById("Message:"+e),0>getAbsoluteY(e)&&(b=!0,c=d);b?(c=parseInt(c),0==c?scrollToTop():isMessageExpanded(a[c])?scrollToMessage(a[c]):(setMessageExpanded(a[c],!0),scrollToMessage(a[c]),updateAllMessageContentsSizeNow())):scrollToTop()}
function updateQuickReplyProgress(a){var b=currentQuickReplyMessageID;null!=currentQuickReplyMessageID&&(b=document.getElementById("QuickReply:"+b+"-progress-value"),a=Math.round(160*a),6>a&&(a=6),null!=b&&(b.style.width=a+"px"))}function updateQuickReplyProgressDone(){}function quickReplyFocus(a){document.getElementById("QuickReply:"+a+"-editor-container").className="-sparrow-quickReplyTextContentsContainerFocus"}
function quickReplyBlur(a){document.getElementById("QuickReply:"+a+"-editor-container").className="-sparrow-quickReplyTextContentsContainer"}function updateAvatar(a,b){var c=document.getElementById("Message:"+a+"-picture");null!=c&&(c.innerHTML='<img src="'+b+'" style="max-width: 38; max-height: 38;"/>')}function cleanPrintPageBreak(a){a=document.getElementById("Message:"+a);null!=a&&(a.style.pageBreakAfter="auto")}
function isSortOrderFromOlderToNewer(){return window.WindowController.jsSortOrderFromOlderToNewer()}function reverseQuickReply(){var a=window.WindowController.jsMessageIDs(),b;for(b in a){var c=a[b],d=document.getElementById("QuickReply:"+c),c=document.getElementById("Message:"+c);d.parentNode.removeChild(d);isSortOrderFromOlderToNewer()?null==c.nextSibling?c.parentNode.appendChild(d):c.parentNode.insertBefore(d,c.nextSibling):c.parentNode.insertBefore(d,c)}}var currentSelectedMessage=null;
function setAllAnimationEnabled(a){console.log("all animation enabled "+a);var b=window.WindowController.jsMessageIDs(),c;for(c in b)setAnimationEnabled(b[c],a)}function setupAfterLoadConversation(){currentSelectedMessage=null;cacheMessageExpandedSize={};expandedTimer={};updateMessageTimer={};downloadingStateDisabled={};headerRightWidth={};blockQuoteVisibility={};quickReplyAll={};cacheClearWindowResizeCache()}
function setupAfterLoadConversationStep2(){var a=window.WindowController.jsMessageIDs();setupHorizontalScroller();reverseQuickReply();if(0<a.length){var b=a[0];cacheTopButtonSize(b)}for(var c in a)b=a[c],cacheHeaderSize(b);for(c in a)b=a[c],applyHeaderSize(b);quickReplyWindowResize();window.WindowController.jsUpdateDownloadingState();window.WindowController.jsUpdateUnreadState();updateAllMessageContentsSizeNow()}
function scrollToAddedMessageAfterSent(a){currentQuickReplySent&&(currentQuickReplySent=currentQuickReplySending=!1,cancelCurrentQuickReply(),isSortOrderFromOlderToNewer()&&null!=a&&(setTimeout(function(){scrollToMessage(a)},300),setTimeout(function(){scrollToMessage(a)},1E3)))}function clickedOnMessage(a){currentSelectedMessage=a}function getCurrentSelectedMessage(){return currentSelectedMessage}
function selectCurrentMessageContent(){if(null!=currentSelectedMessage){var a=document.getElementById("Message:"+currentSelectedMessage+"-body"),b=document.createRange();b.selectNodeContents(a);window.getSelection().removeAllRanges();window.getSelection().addRange(b)}}
function conversationInsertBeforeMessage(a,b){var c=null,d=document.getElementById("Messages"),e=document.createElement("div");null!=b&&(c=document.getElementById("MessageContainer:"+b));e.innerHTML=a;e=first_child(e);d.insertBefore(e,c)}function removeMessageContainer(a){a=document.getElementById("MessageContainer:"+a);null!=a&&a.parentNode.removeChild(a)}
function reorderConversationMessages(a){var b={},c=document.getElementById("Messages"),d;for(d in a){var e=a[d],f;f=document.getElementById("MessageContainer:"+e);b[e]=f;f.parentNode.removeChild(f)}for(d in a)e=a[d],f=b[e],c.appendChild(f)}function setAllMessagesExpanded(a){var b=window.WindowController.jsMessageIDs(),c;for(c in b)setMessageExpanded(b[c],a);updateAllMessageContentsSizeNow()}
function isCurrentFocusedNodeIsQuickReplySelected(){return isQuickReplySelected(window.getSelection().anchorNode)}function showLoadRemoteImagesBar(){document.getElementById("remoteImagesBar").style.top="0px"}function hideLoadRemoteImagesBar(){var a=document.getElementById("remoteImagesBar");a.style.top=-(a.clientHeight+5)+"px"}function showRemoteImagesOnce(){window.WindowController.jsLoadImagesAndTrustSender_(!1);hideLoadRemoteImagesBar()}
function showRemoteImagesAlways(){window.WindowController.jsLoadImagesAndTrustSender_(!0);hideLoadRemoteImagesBar()}function showSpinnerInMessage(a){a=document.getElementById("Message:"+a+"-body");showSpinnerInMessageDiv(a)}function showSpinnerInMessageDiv(a){if("spinner"==a.id)return showSpinnerInDiv(a),!0;for(a=a.firstChild;null!=a;){if(showSpinnerInMessageDiv(a))return!0;a=a.nextSibling}return!1}function showSpinner(){var a=document.getElementById("spinner");null!=a&&showSpinnerInDiv(a)}
function showSpinnerInDiv(a){(new Spinner({lines:12,length:5,width:3,radius:7,color:"#666",hwaccel:!0,top:0,left:-16})).spin(a)};com.sparrow.spinner={};
(function(a,b,c){function d(a,c){var d=b.createElement(a||"div"),e;for(e in c)d[e]=c[e];return d}function e(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),c=0.01+100*(c/d),d=Math.max(1-(1-a)/b*(100-c),a),f=m.substring(0,m.indexOf("Animation")).toLowerCase();return p[e]||(q.insertRule("@"+(f&&"-"+f+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+
a+"}100%{opacity:"+d+"}}",0),p[e]=1),e}function g(a,b){var d=a.style,e,f;if(d[b]!==c)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(f=0;f<r.length;f++)if(e=r[f]+b,d[e]!==c)return e}function j(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],e;for(e in d)a[e]===c&&(a[e]=d[e])}return a}function k(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var r=["webkit","Moz",
"ms","O"],p={},m,q=function(){var a=d("style");return e(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),u={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto"},l=function o(a){if(!this.spin)return new o(a);this.opts=h(a||{},o.defaults,u)};l.defaults={};h(l.prototype,{spin:function(a){this.stop();var b=this,c=b.opts,e=b.el=j(d(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),
f=c.radius+c.length+c.width,g,h;a&&(a.insertBefore(e,a.firstChild||null),h=k(a),g=k(e),j(e,{left:("auto"==c.left?h.x-g.x+(a.offsetWidth>>1):c.left+f)+"px",top:("auto"==c.top?h.y-g.y+(a.offsetHeight>>1):c.top+f)+"px"}));e.setAttribute("aria-role","progressbar");b.lines(e,b.opts);if(!m){var s=0,t=c.fps,n=t/c.speed,l=(1-c.opacity)/(n*c.trail/100),v=n/c.lines;!function w(){s++;for(var a=c.lines;a;a--){var d=Math.max(1-(s+a*v)%n*l,c.opacity);b.opacity(e,c.lines-a,d,c)}b.timeout=b.el&&setTimeout(w,~~(1E3/
t))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function c(a,e){return j(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:e,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g+b.rotate)+"deg) translate("+b.radius+"px,0)",borderRadius:(b.width>>1)+"px"})}for(var g=0,h;g<b.lines;g++)h=j(d(),{position:"absolute",top:1+~(b.width/2)+
"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:m&&f(b.opacity,b.trail,g,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(h,j(c("#000","0 0 4px #000"),{top:"2px"})),e(a,e(h,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});!function(){function a(b,c){return d("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}var b=j(d("group"),{behavior:"url(#default#VML)"});!g(b,
"transform")&&b.adj?(q.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(b,c){function d(){return j(a("group",{coordsize:h+" "+h,coordorigin:-g+" "+-g}),{width:h,height:h})}function f(b,k,h){e(l,e(j(d(),{rotation:360/c.lines*b+"deg",left:~~k}),e(j(a("roundrect",{arcsize:1}),{width:g,height:c.width,left:c.radius,top:-c.width>>1,filter:h}),a("fill",{color:c.color,opacity:c.opacity}),a("stroke",{opacity:0}))))}var g=c.length+c.width,h=2*g,k=2*-(c.width+c.length)+"px",l=j(d(),
{position:"absolute",top:k,left:k});if(c.shadow)for(k=1;k<=c.lines;k++)f(k,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(k=1;k<=c.lines;k++)f(k);return e(b,l)},l.prototype.opacity=function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;a&&b+d<a.childNodes.length&&(a=a.childNodes[b+d],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=c))}):m=g(b,"animation")}();a.Spinner=l})(window,document);com.sparrow.uri={};var URI,URIQuery;
(function(){function a(a,b){var c=/^(.*)\//;return a.authority&&!a.path?"/"+b:null==a.getPath()?"/"+b:a.getPath().match(c)[0]+b}function b(a){if(!a)return"";a=a.replace(/\/\.\//g,"/");for(a=a.replace(/\/\.$/,"/");a.match(c);)a=a.replace(c,"/");for(a=a.replace(/\/([^\/]*)\/\.\.$/,"/");a.match(/\/\.\.\//);)a=a.replace(/\/\.\.\//,"/");return a}var c=/\/((?!\.\.\/)[^\/]*)\/\.\.\//;URI=function(a){a||(a="");var a=a.match(/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/),b=a[1]||
null,c=a[2]||null,g=a[3]||null,j=a[4]||null,h=a[5]||null;this.getScheme=function(){return b};this.setScheme=function(a){b=a};this.getAuthority=function(){return c};this.setAuthority=function(a){c=a};this.getPath=function(){return g};this.setPath=function(a){g=a};this.getQuery=function(){return j};this.setQuery=function(a){j=a};this.getFragment=function(){return h};this.setFragment=function(a){h=a}};URI.prototype.toString=function(){var a="";this.getScheme()&&(a+=this.getScheme()+":");this.getAuthority()&&
(a+="//"+this.getAuthority());this.getPath()&&(a+=this.getPath());this.getQuery()&&(a+="?"+this.getQuery());this.getFragment()&&(a+="#"+this.getFragment());return a};URI.prototype.resolve=function(c){var e=new URI;this.getScheme()?(e.setScheme(this.getScheme()),e.setAuthority(this.getAuthority()),e.setPath(b(this.getPath())),e.setQuery(this.getQuery())):(this.getAuthority()?(e.setAuthority(this.getAuthority()),e.setPath(b(this.getPath())),e.setQuery(this.getQuery())):(this.getPath()?("/"===this.getPath().charAt(0)?
e.setPath(b(this.getPath())):(e.setPath(a(c,this.getPath())),e.setPath(b(e.getPath()))),e.setQuery(this.getQuery())):(e.setPath(c.getPath()),this.getQuery()?e.setQuery(this.getQuery()):e.setQuery(c.getQuery())),e.setAuthority(c.getAuthority())),e.setScheme(c.getScheme()));e.setFragment(this.getFragment());return e};URI.prototype.parseQuery=function(){return URIQuery.fromString(this.getQuery(),this.querySeparator)};URIQuery=function(){this.params={};this.separator="&"};URIQuery.fromString=function(a,
b){var c=new URIQuery;b&&(c.separator=b);c.addStringParams(a);return c};URIQuery.prototype.addStringParams=function(a){for(var a=a.split(this.separator),b,c,g=0;g<a.length;g++)b=a[g].split("=",2),c=b[0].replace(/\+/g," "),b=b[1].replace(/\+/g," "),this.params.hasOwnProperty(c)||(this.params[c]=[]),this.params[c].push(b)};URIQuery.prototype.getParam=function(a){return this.params.hasOwnProperty(a)?this.params[a][0]:null};URIQuery.prototype.toString=function(){var a=[],b;b=this.params;var c=[],g;for(g in b)b.hasOwnProperty(g)&&
c.push(g);b=c.sort();for(c=0;c<b.length;c++)for(g=0;g<this.params[b[c]].length;g++)a.push(b[c].replace(/ /g,"+")+"="+this.params[b[c]][g].replace(/ /g,"+"));return a.join(this.separator)}})();com.sparrow.conversationmain={};
